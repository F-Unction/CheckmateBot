# CheckmateBot
CheckmateBot

框架：<https://github.com/Polythefake/KanaBot>

**特别提示：验证码需要用户手动输入**

### 关于控制者

为了方便远程控制，特推出控制者功能，被标记为控制者的用户可以执行高级命令，且不需要花费分数。

### 命令说明

在每个命令中，```[x]``` 表示 ```x``` 是必选参数，```(x)``` 表示 ```x``` 是可选参数。

| 命令 |含义  |特殊说明|花费分数|是否为高级命令|
| :----------: | :----------: | :----------: | :----------: | :----------: |
|```help (command)```  |查看命令列表（或命令command的用法）  |/ |0|否|
|```refresh```  |强制刷新  |游戏开始后5min可用 |20|否|
|```info```  |获取工作信息  |/ |100|否|
|```chat [xxx]```  |与Bot对话  |/ |5|否|
|```query (i)```  |查询自己（或玩家i）的分数  |/ |0|否|
|```choose (mapname/mapid) (-f)```  |查看地图票数榜（或给mapname/mapid地图投票）  |控制者可以使用额外参数-f，表示锁定选择 |5|否|
|```send [uname] [x]```  |赠送x点分数给用户名为uname的玩家  |/ |5|否|
|```draw [n]```  |抽奖n次  |/ |10*n|否|
|```kill```  |关闭Bot  |/ |/|**是**|
|```enter [roomid]```  |进入roomid房间  |/ |/|**是**|
|```setsecret```  |切换房间私密状态  |/ |/|**是**|
|```savedata```  |保存游戏数据  |目前只保存分数排行榜 |/|**是**|
|```readdata```  |读取游戏数据  |/ |/|**是**|
|```setautosave```  |切换自动保存  |每局游戏结束后保存一次，每30min备份一次（默认值`False`） |/|**是**|

### 关于chat命令

使用了腾讯云的[NLP](https://cloud.tencent.com/product/nlp)

若要在您的Bot上使用该命令，需要在`bot.py`同目录下建立名为`secret`的文件，包含2行，第1行为您的SecretId，第2行为您的SecretKey。

### 关于地图选择

- 每次游戏开始后，投票清空。
- 控制者可设置Bot的`defaultSelectedMap`，Bot会自动投给该地图一票。

### 关于抽奖

- 奖池就是Bot的分数。
- 中奖概率保存在变量`role`中，一个规则`[a, b]`表示有a%的概率抽到b倍的奖池。
    - 如默认值`[[3, 0.2], [10, 0.1], [87, 0]]`包含3条规则，表示3%抽到0.2倍奖池，10%抽到0.1倍奖池，87%不中奖。